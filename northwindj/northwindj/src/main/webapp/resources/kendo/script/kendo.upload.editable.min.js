(function(n,t){t(["./kendo.upload"],n)})(function(){return function(n){var i=window.kendo,r=i.ui,t=r.Upload,u=n.extend,e=n.proxy,f=t.extend({init:function(i,r){var s=this,h=r.folderUrl,f=r.async,e=f.readUrl,u=f.transportData||{url:h},o=[];e&&n.ajax({url:e,async:!1,data:typeof u=="function"?u():u,success:function(n){o=n}});r=n.extend(!0,{async:{transportData:u},files:o},r);r.name="Upload";t.fn.init.call(s,i,r)},options:{name:"EditableUpload",async:{autoUpload:!0},folderUrl:"",searchPattern:"",fileIcon:{"class":"",url:""},template:'<span class="k-progress" style="width: 100%;"><\/span><div class="file-wrapper"><span class="file-icon file-#=extension.substring(1)# #=icon.class#" style="background-image: #=icon.url#"><\/span><a class="k-filename k-link" title="#=name#" href="#=url#" target="_blank">#=name#<\/a><strong class="k-upload-status"><button type="button" class="k-upload-action"><\/button><\/strong><\/div>',select:function(t){var u=this,f=u.options,e=f.multiple,r=f.searchPattern.toLowerCase();r&&r!="*"&&n(t.files).each(function(){if(r.search(this.extension.toLowerCase())==-1){alert(i.format("只能上传以下格式的文件：{0}。",r));t.preventDefault();return}});e&&n(t.files).each(function(){var n=u.wrapper.find(".k-filename[title='"+this.name+"']").parent().parent(".k-file-success");if(n.length)if(confirm("确定要覆盖 "+this.name+" 吗？"))i.ui.Upload.fn._removeFileEntry.call(u,n);else{t.preventDefault();return}})},upload:function(n){var i=this,r=i.options,u=r.async,t=u.transportData;n.data=typeof t=="function"?t():t},remove:function(t){var r=this,u=r.options,f=u.async,i=f.transportData;n(t.files).each(function(){if(!confirm("确定要删除 "+this.name+" 吗？")){t.preventDefault();return}});t.data=typeof i=="function"?i():i},success:function(t){var i=this;n(t.files).each(function(){var t=i.wrapper.find(".k-file[data-uid='"+this.uid+"']"),r=t.find(".file-icon"),u=t.find(".k-filename"),f=u.attr("href");r.css("background-image")!="none"&&r.css("background-image","url('"+f+"')");n(".k-upload-status",t).prepend("<span class='k-upload-pct'>100%<\/span>")})}},_prepareTemplateData:function(n,i){var f=this,e=f.options,o=e.folderUrl,u=e.fileIcon,h=i.fileNames,s=h[0],r=t.fn._prepareTemplateData.call(f,n,i);return r.extension=s.extension||"",r.file=s,r.url=o?o+"/"+n:"",r.icon=typeof u=="function"?u(r):u,r},_fileAction:function(i,r){var u=this,o=u.options,f=o.actions,e;t.fn._fileAction.call(u,i,r);r==="remove"&&f&&(e=i.find(".k-upload-status"),n.each(f,function(n,t){var r=t.title||"",f=t.actionClass||"",i=t.click,o=u._renderAction(f,r,"").appendTo(e);i&&o.click(i)}))}});r.plugin(f);u(r,{getFileName:function(n){return n&&n.replace(/^.*[\\\/]/,"")},getFileExtension:function(n){var t=n.match(/\.([^\.]+)$/);return t?t[0]:""},getFileFolderUrl:function(n){var t=n.lastIndexOf("/");return t!=-1?n.substr(0,t):n}})}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});